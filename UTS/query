CREATE TABLE Account(
    id_account INT auto_increment,
    email VARCHAR(100) NOT NULL,
    username VARCHAR(50) UNIQUE NOT NULL,
    namaDepan VARCHAR(100) NOT NULL,
    namaBelakang VARCHAR(100) NOT NULL,
    password_account VARCHAR(150) NOT NULL,
    PRIMARY KEY (id_account));

CREATE TABLE tabellist(
  id_tabel INT auto_increment,
  username VARCHAR(50) NOT NULL,
  judul_tabel VARCHAR(70) NOT NULL,
  PRIMARY KEY (id_tabel),
  FOREIGN KEY (username) REFERENCES Account(username));

CREATE TABLE itemlist(
  id_todo INT auto_increment,
  id_tabel INT NOT NULL,
  progress VARCHAR(15) DEFAULT 'Belum',
  nama_item VARCHAR(28) NOT NULL,
  PRIMARY KEY (id_todo),
  FOREIGN KEY (id_tabel) REFERENCES tabellist(id_tabel));


-- title VARCHAR(50) NOT NULL,               -- Di list dengan judul apa (Senin, Selasa)
-- progress VARCHAR(15) DEFAULT "Belum",     -- Sudah atau Belum
-- nama_item VARCHAR(100) NOT NULL,          -- Nama aktivitas dalam list



-- SELECT t.judul_tabel, i.id_todo, i.nama_item, i.progress 
--               FROM itemlist AS i
--               JOIN tabellist AS t ON t.id_tabel = i.id_tabel
--               WHERE t.username = 'Kelvin' AND t.id_tabel = 1
--               GROUP BY i.id_todo;

-- SELECT 
--     t.judul_tabel,
--     COUNT(i.id_todo) AS total_tasks, 
--     SUM(CASE WHEN i.progress = 'Selesai' THEN 1 ELSE 0 END) AS selesai_tasks,
--     SUM(CASE WHEN i.progress = 'Belum' THEN 1 ELSE 0 END) AS belum_tasks
-- FROM itemlist AS i
-- JOIN tabellist AS t ON t.id_tabel = i.id_tabel
-- WHERE t.username = 'Kelvin' AND t.id_tabel = 1
-- GROUP BY t.judul_tabel WITH ROLLUP;
